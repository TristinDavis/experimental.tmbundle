<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>beforeRunningCommand</key>
	<string>nop</string>
	<key>command</key>
	<string># Offers spelling alternatives for current word.
# You MUST have installed aspell for this to work.
#
#
res=$(aspell &lt;&lt;&lt;"$TM_CURRENT_WORD" -a --mode=none|tail -n2|cut -f2 -d:|tr -d ,)
if [[ "${res:0:1}" == "*" ]]
then
# Correct word. Exit
	exit_discard
fi
#res="${res//'/\\\'}"
#echo $res

# Offer corrections via cocoadialog
result=$(CocoaDialog dropdown \
  --title 'Possible spellings' \
  --text 'Choose correct spelling for insertion, or escape to cancel.' \
  --button1 Ok --button2 Cancel \
  --string-output --no-newline \
  --items $res)
if [[ ${result:0:2} != Ok ]]
then
	exit_discard
else
	result=${result:3}
	echo -n ${result}
fi	

</string>
	<key>fallbackInput</key>
	<string>word</string>
	<key>input</key>
	<string>selection</string>
	<key>keyEquivalent</key>
	<string>^;</string>
	<key>name</key>
	<string>Check spelling</string>
	<key>output</key>
	<string>replaceSelectedText</string>
	<key>uuid</key>
	<string>7AA9C0BE-E6A9-426C-A2A0-FF07194524F9</string>
</dict>
</plist>
